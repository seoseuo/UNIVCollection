# SQL 기초

## 데이터 베이스의 정의와 특성

### 데이터 베이스의 정의와 특징

- 데이터 베이스
    - 특정 주제, 목적과 관련된 데이터를 여러 응용 시스템에서도 공용 할 수 있도록 묶어 놓아 통합, 구조화 하여 저장된 데이터의 집합
    
    - 특징
        1. `실시간 접근성` 사용자의 요구 사항을 실시간으로 즉시 처리하여 응답할 수 있다.
        2. `계속적인 변화` 데이터는 항상 최신의 데이터로 유지될 수 있다.
        3. `동시 공유` 여러 사용자가 동시에 원하는 데이터에 접근할 수 있다.
        4. `내용에 의한 참조 가능` 데이터의 일부 내용으로 원하는 데이터에 접근할 수 있다.

- DBMS
    - 데이터 베이스를 쉽게 이용하기 위하여 지원, 관리해주는 시스템

### DB/DBMS의 특징

- 데이터의 무결성 `Intergrity`
    - 데이터베이스 안의 데이터는 오류가 없어야 한다.
        1. 개체 무결성 `Entity intergrity`
            - 모든 테이블이 기본 키 `primary key` 로 선택된 필드 `column` 를 가져야 한다. 기본 키로 선택된 필드는 고유한 값을 가져야 하며, 빈 값은 허용하지 않는다.
        2. 참초 무결성 `Referential intergrity`
            - 관계형 데이터베이스 모델에서 참조 무결성은 참조 관계에 있는 두 테이블의 데이터가 항상 일관된 값을 갖도록 유지되는 것을 말한다.
    
- 데이터의 독립성
    - 데이터베이스의 크기를 변경하거나 데이터 파일의 저장소를 변경
        - 기존에 작성된 응용프로그램은 전혀 영향을 받지 않아야 한다.
- 보안
    - 데이터베이스 안의 데이터에 데이터를 소유한 사람이나 데이터에 접근이 허가된 사람만 접근 할 수 있어야 한다.
    - 접근할 때도 사용자의 계정에 따라서 다른 권한을 가진다.
- 데이터 중복의 최소화
    - 동일한 데이터가 여러개 중복되어 저장되는 것을 방지.

- 응용프로그램 제작 및 수정이 쉬워짐
    - 통일된 방식으로 응용프로그램 작성 가능
    - 유지보수 또한 쉬워진다.

- 데이터의 안전성 향상
    - 대부분의 DBMS가 제공하는 백어브 복원 기능을 이용
    - 데이터가 깨지는 문제가 발생할 경우 원상으로 복원, 복구하는 방법이 명확해진다.

---

## 데이터베이스의 관리 시스템의 발전 과정

### 데이터베이스의 발전

- 데이터베이스 관리시스템
    - 파일 시스템의 단점 보완
    - 대량의 데이터를 보다 효율적으로 관리하고 운영하기 위해 사용
    - DBMS = **D** ata **B** ase **M** anagement **S** ystem
    - 데이터의 집합인 `데이터베이스`를 잘 관리하고 운영하기 위한 시스템 또는 소프트웨어

- SQL `Structured Query Languge`
    - DBMS에 데이터 구축, 관리, 활용 위해서 사용되는 언어
    - DBMS를 통해 중요한 정보들을 입력, 관리, 추출

### 2세대 : 관계형 DBMS

- `관계 DBMS` : 데이터베이스를 테이블 형태로 구성
    - 예) 오라클, MsSQL서버, 엑세스, 인포믹스, MySQL
    

### 3세대 : 객체지향 DBMS, 객체관계 DBMS

- `객체지향 DBMS` : 객체를 이용해 데이터베이스를 구성
    - 예) 오투, 온투스, 젬스톤
    - 객체관계 DBMS : 객체 DBMS + 관계 DBMS

### 4세대 : NoSQL

- Key , Value 구조로 데이터 저장
- 기존의 SQL을 사용하지 않음
- Big Data처리에 효과적
- RDBMS에 비해 저렴한 비용으로 분산처리와 병렬처리 가능

### 관계형 DBMS `Relational DBMS`의 장단점

- 장점
    - 다른 DBMS에 비해 업무가 변화될 경우 쉽게ㅔ 변화에 순응
    - 유지보수 측면에서도 편리
    - 대용량 데이터의 고나리와 데이터 무결성 `Integration`보장

- 단점
    - 시스템 자원을 많이 차지해 시스템이 전반적으로 느려지는 것
        - 하드웨어 발전되어 해결

---

## 데이터베이스 구조

- `테이블 (Table)`  : 서로 관련 있는 데이터의 집합으로 하나 이상의 필드로 구분된 데이터 구조로 되어 있다. 데이터가 각 필드를 채우면 하나의 레코드로 등록된다.
- `레코드 (Recoed)` : 서로 연관된 데이터 항목의 집합으로, 테이블에 추가되는 데이터의 기본 단위다.
- `키(Key)`：항목을 구분하거나 검색하는 기준이 되는 필드다
- `기본키(Primary Key)`：유일하게 레코드를 식별할 수 있게 해주는 필드
다. 속성값은 Null이나 중복된 값을 입력할 수 없는 ID, 학번, 주민등록번호 등이 있다.

---

# 데이터 언어

### SQL `(Structured Query Language)`

- 데이터베이스에서 정보를 얻거나 추가, 삭제할 수 있게 해주는 표준 대화식 프로그래밍 언어
- 거의 모든 데이터베이스 관리 시스템에서 표준으로 채택

- 데이터 정의어 `DDL: Data Definition Languge`
    - 테이블이나 관계의 구조를 생성하는데 사용
        - `CREATE` 새로운 데이터베이스 관계(테이블), 뷰, 인덱스, 저장 프로시저를 제거
        - `DROP` 이미 존재하는 데이터베이스 관계(테이블), 뷰, 인덱스, 저장 프로시저를 제거
        - `ALTER` 이미 존재하는 데이터베이스 개체에 대한 변경, RENAME의 역할
        - `TRUNCATE` 관계 (테이블)에서 데이터를 돌이킬 수 없는 제거
    
- 데이터 조작어 `DML : Data Manipulation Language`
    - 테이블에 데이터 검색, 삽입, 수정, 삭제하는 데 사용
        - `SELECT` 데이터베이스에서 데이터를 검색
        - `INSERT` 데이터베이스에 데이터를 추가
        - `UPDATE` 데이터베이스의 데이터를 변경
        - `DELETE` 데이터베이스의 데이터를 삭제
        
- 데이터 제어 언어 `DCL : Data Control Languge`
    - `GRANT` 특정 데이터베이스 사용자에게 특정 작업에 대한 수행 권한을 부여한다.
        - `REVOKE` 특징 데이터베이스 사용자에게 특정 작업에 대한 수행 권한을 박탈 || 회수 한다.

### 쿼리(Query)

- 데이터베이스에 특정 데이터를 검색하도록 요청하는 것이다.

---

# 권한

### 사용자 권한이란?

- 사용자에 따라서 접근할 수 있는 DB 데이터와 사용할 수 있는 기능을 제한

### 관리자 계정 `root`

- 모든 업무를 할 수 있는 슈퍼유저 (SUPER USER) 계정
- 데이터베이스, 테이블 생성 및 삭제

### 사용자 계정

- 데이터베이스의 정보를 사용 할 수 있는 권한
- 권한 부여에 따라 틀려지지만 보통 데이터베이스,  테이블 생성, 삭제의 권한은 주어지지 않으며, 데이터의 추가, 수정, 삭제, 검색의 권한들이 주어진다.

# 기본 키, 외래 키

### 기본키 `Primary Key`

- 테이블에서 레코드를 유일하게 구분하는 칼럼

### 외부키 `Foreign Key`

- 다른 테이블의 기본 키로 사용되면서 테이블과의 관계를 연결하는 역할을 하는 칼럼

![image](https://user-images.githubusercontent.com/90320005/211529532-47809f81-d909-4184-a4d2-9795ad1eaae8.png)

---

# 데이터베이스 관련 명령

### 데이터 타입

![image](https://user-images.githubusercontent.com/90320005/211529776-06416036-abc0-4ead-8d6b-07d9dd62b3a6.png)

### 데이터베이스 생성 명령

```sql
CREATE DATABASE 데이터베이스명;
```

### 데이터베이스 목록 보기

```sql
SHOW DATABASE;
```

### 데이터베이스 삭제

```sql
DROP DATABASE 데이터베이스명;
```

### 테이블 생성 명령

```sql
CREATE TABLE 테이블명 (
필드명1 타입,
필드명2 타입,
필드명3 타입,
- - - - - - -
PRIMARY KEY(필드명)
);
```

### 데이터베이스 테이블의 구조 확인

```sql
desc 테이블명;
```

### 테이블 삭제

```sql
DROP TABLE 테이블명;
```

---

# 레코드 관련 명령

### 테이블에 데이터 삽입

```sql
INSERT INTO 테이블명 ( 필드명1, 필드명2, . . . ) 
VALUES ( 필드값1, 필드값2, . . .);
```

### 특정 필드 데이터 검색 명령

```sql
SELECT 필드명1, 필드명2 FROM 테이블명;
```

### 검색 결과 중복 제거

```sql
SELECT DISTINCT 필드명1 FROM 테이블명;
```

### 조건에 맞는 레코드 검색 명령

```sql
SELECT 필드명1, 필드명2 FROM 테이블명 WHERE 조건식;
```

**조건 검색**

![image](https://user-images.githubusercontent.com/90320005/211529905-4b37d0fc-2e9e-46f2-a179-1b5666852337.png)

### 특정 문자열이 포함된 레코드 검색 명령

```sql
SELECT 필드명1, 필드명2, ... FROM 테이블명 WHERE 검색 필드 LIKE 조건식;
```

**LIKE를 이용한 검색**

| 기호 | 설명 |
| --- | --- |
| % | 0개 이상의 문자 (문자의 내용과 개수는 상관 없음) |
| _ | 한 개의 문자 (문자의 내용은 상관 없음) |

![image](https://user-images.githubusercontent.com/90320005/211530134-3b682888-42db-4bcc-88df-e9cb228afff3.png)

### 레코드 정렬 명령

```sql
SELECT 필드명1, 필드명2 FROM 테이블 명 ORDER BY 필드명;
```

---

# 집계 함수

| 집계함수 | 설명 |
| --- | --- |
| COUNT() | COUNT() 함수는 선택된 필드에서 특정 조건을 만족하는 레코드의 총 개수를 반환 |
| MIN() | MIN() 함수는 선택된 필드에 저장된 값 중 가장 작은 값을 반환합니다. |
| MAX() | MAX() 함수는 선택된 필드에 저장된 값 중 가장 큰 값을 반환합니다. |
| SUM() | SUM() 함수는 선택된 숫자 타입의 필드에 저장된 값의 총 합을 반환 |
| AVG() | AVG() 함수는 선택된 숫자 타입의 필드에 저장된 값의 평균값을 반환 |

### 테이블 집계함수 사용

```sql
SELECT 집계함수(필드명) AS 변수명 FROM 테이블명
```

> EX)
모든 사람의 age의 합을 sum_age에 저장
> 

```sql
SELECT SUM(age) FROM MEM;
```

---

# 레코드 수정 명령

### 레코드 수정명령

```sql
UPDATE 테이블명 SET 필드명 = 필드값 [WHERE 조건식]
```

---

# 레코드 삭제 명령

### 조건식을 만족하는 특정 레코드 삭제 명령

```sql
DELETE FROM 테이블명 WHERE 조건식
```

---

# Foreign Key

### 테이블 생성 명령
```sql
CREATE TABLE 테이블명 (
	필드명1 타입,
	필드명2 타입,
	. . . . . . .
	PRIMARY KEY(필드명),
	FOREIGN KEY 속성이름 REFERENCES 테이블이름(속성이름)
	[ON DELETE [CASCADE┃SET NULL]
);
```
